ALTER SESSION SET NLS_DATE_FORMAT='DD/MM/YYYY';
DROP TABLE FACTURA;
DROP TABLE ALMACENA;
DROP TABLE ESTANTE;
DROP TABLE GALPON;
DROP TABLE PRODUCTO;
DROP TABLE CLIENTE;

CREATE TABLE CLIENTE( 
RUT NUMBER(5) NOT NULL CONSTRAINT CLIENTE_pk PRIMARY KEY, 
RAZONSOCIAL VARCHAR2(120) CONSTRAINT CLIENTE_Ak UNIQUE NOT NULL, 
TELEFONO NUMBER(30) NOT NULL, 
DIRECCION VARCHAR2(80) NOT NULL, 
FCHING DATE NOT NULL);

CREATE TABLE PRODUCTO( 
CODPROD NUMBER(5) NOT NULL CONSTRAINT PRODUCTO_pk PRIMARY KEY, 
DESCRIPCION VARCHAR2(100) NOT NULL, 
RUT NUMBER(5) NOT NULL CONSTRAINT PRODUCTO_TO_CLIENTE_FK REFERENCES CLIENTE, 
FDESDE DATE NOT NULL,
FHASTA DATE,
PRECIO NUMBER(5) NOT NULL,
TIPO VARCHAR2(100) NOT NULL);

CREATE TABLE GALPON( 
NOMBRE VARCHAR2(100) NOT NULL CONSTRAINT GALPON_pk PRIMARY KEY,
SUPERFICIE NUMBER(10) NOT NULL);

CREATE TABLE ESTANTE( 
NOMBRE VARCHAR2(100) NOT NULL CONSTRAINT ESTANTE_TO_GALPON_FK REFERENCES GALPON,
FILA NUMBER(5) NOT NULL,
NUMESTANTE NUMBER(5) NOT NULL,
CONSTRAINT ESTANTE_Pk PRIMARY KEY(NOMBRE, FILA, NUMESTANTE));

CREATE TABLE ALMACENA( 
NOMBRE VARCHAR2(100) NOT NULL,
FILA NUMBER(5) NOT NULL,
NUMESTANTE NUMBER(5) NOT NULL,
CODPROD NUMBER(5) NOT NULL CONSTRAINT ALMACENA_TO_PRODUCTO_FK REFERENCES PRODUCTO, 
CONSTRAINT ALMACENA_Pk PRIMARY KEY(NOMBRE, FILA, NUMESTANTE, CODPROD),
CONSTRAINT ALM_TO_EST_FK FOREIGN KEY(NOMBRE, FILA, NUMESTANTE) REFERENCES ESTANTE (NOMBRE, FILA, NUMESTANTE));

CREATE TABLE FACTURA( 
NUMFAC NUMBER(5) NOT NULL CONSTRAINT FACTURA_pk PRIMARY KEY, 
CODPROD NUMBER(5) NOT NULL CONSTRAINT FACTURA_TO_PRODUCTO_FK REFERENCES PRODUCTO,
FECHA DATE NOT NULL,
IMPORTE NUMBER(10) NOT NULL,
FCHVENCIMIENTO DATE NOT NULL);

INSERT INTO CLIENTE VALUES  ('90001','Logística y Distribución','22324546','Yaguaron 2014',to_date('10/02/16','DD/MM/RR'));
INSERT INTO CLIENTE VALUES  ('90002','INFORMATIC','23241414','Yi 2340',to_date('31/10/13','DD/MM/RR'));
INSERT INTO CLIENTE VALUES  ('90003','Infolab S.A','23124124','Lezica 2424',to_date('30/10/13','DD/MM/RR'));
INSERT INTO CLIENTE VALUES  ('90004','Serviclean','23234242','Colonia 2515',to_date('11/02/12','DD/MM/RR'));
INSERT INTO CLIENTE VALUES  ('90005','CONSULTORES S.A','23240203','Yaguaron 2033',to_date('20/03/13','DD/MM/RR'));
INSERT INTO CLIENTE VALUES  ('90006','Galletitas S.A','23414592','Cuareim 2142',to_date('11/02/12','DD/MM/RR'));
INSERT INTO CLIENTE VALUES  ('90007','Hermanos Ripoldi','23452456','Lezica 1859',to_date('19/09/13','DD/MM/RR'));

INSERT INTO PRODUCTO VALUES ('1','MONITOR','90003',to_date('31/10/13','DD/MM/RR'),to_date('22/06/16','DD/MM/RR'),'12000','INFORMÁTICA');
INSERT INTO PRODUCTO VALUES ('2','BALDE','90001',to_date('10/03/16','DD/MM/RR'),to_date('30/07/20','DD/MM/RR'),'30000','ANTIGUEDAD');
INSERT INTO PRODUCTO VALUES ('3','ESCOBA','90002',to_date('31/10/13','DD/MM/RR'),to_date('22/06/16','DD/MM/RR'),'11000','LIMPIEZA');
INSERT INTO PRODUCTO VALUES ('4','PERFUME','90004',to_date('31/10/13','DD/MM/RR'),to_date('22/06/16','DD/MM/RR'),'10000','PERFUMERIA');
INSERT INTO PRODUCTO VALUES ('5','ANILLO','90005',to_date('31/10/13','DD/MM/RR'),to_date('22/06/16','DD/MM/RR'),'9000','JOYERIA');
INSERT INTO PRODUCTO VALUES ('6','PERLA','90006',to_date('30/11/13','DD/MM/RR'),to_date('10/03/16','DD/MM/RR'),'12000','JOYERIA');
INSERT INTO PRODUCTO VALUES ('7','SUSHI','90007',to_date('30/10/13','DD/MM/RR'),to_date('21/06/16','DD/MM/RR'),'20000','ALIMENTO');

INSERT INTO GALPON VALUES ('LOGÍSTICA DEL NORTE','200000');
INSERT INTO GALPON VALUES ('LOGÍSTICA DEL SUR','100000');

INSERT INTO ESTANTE VALUES ('LOGÍSTICA DEL NORTE','1','1');
INSERT INTO ESTANTE VALUES ('LOGÍSTICA DEL NORTE','1','2');
INSERT INTO ESTANTE VALUES ('LOGÍSTICA DEL NORTE','1','3');
INSERT INTO ESTANTE VALUES ('LOGÍSTICA DEL SUR','1','1');
INSERT INTO ESTANTE VALUES ('LOGÍSTICA DEL SUR','1','2');
INSERT INTO ESTANTE VALUES ('LOGÍSTICA DEL SUR','1','3');

INSERT INTO ALMACENA VALUES ('LOGÍSTICA DEL NORTE','1','1','1');
INSERT INTO ALMACENA VALUES ('LOGÍSTICA DEL NORTE','1','1','4');
INSERT INTO ALMACENA VALUES ('LOGÍSTICA DEL NORTE','1','1','7');
INSERT INTO ALMACENA VALUES ('LOGÍSTICA DEL SUR','1','1','2');
INSERT INTO ALMACENA VALUES ('LOGÍSTICA DEL SUR','1','1','5');
INSERT INTO ALMACENA VALUES ('LOGÍSTICA DEL SUR','1','2','6');

INSERT INTO FACTURA VALUES ('1','1',to_date('31/10/13','DD/MM/RR'),'11000',to_date('12/12/13','DD/MM/RR'));
INSERT INTO FACTURA VALUES ('2','1',to_date('01/11/13','DD/MM/RR'),'500',to_date('12/12/13','DD/MM/RR'));
INSERT INTO FACTURA VALUES ('3','1',to_date('02/11/13','DD/MM/RR'),'500',to_date('12/12/13','DD/MM/RR'));
INSERT INTO FACTURA VALUES ('4','2',to_date('12/04/16','DD/MM/RR'),'25000',to_date('14/06/16','DD/MM/RR'));
INSERT INTO FACTURA VALUES ('5','2',to_date('13/04/16','DD/MM/RR'),'2000',to_date('14/06/16','DD/MM/RR'));
INSERT INTO FACTURA VALUES ('6','2',to_date('14/05/16','DD/MM/RR'),'3000',to_date('14/06/16','DD/MM/RR'));
INSERT INTO FACTURA VALUES ('7','3',to_date('10/04/16','DD/MM/RR'),'9000',to_date('14/06/16','DD/MM/RR'));
INSERT INTO FACTURA VALUES ('8','3',to_date('11/05/16','DD/MM/RR'),'1000',to_date('14/06/16','DD/MM/RR'));
INSERT INTO FACTURA VALUES ('9','3',to_date('12/05/16','DD/MM/RR'),'1000',to_date('14/06/16','DD/MM/RR'));
INSERT INTO FACTURA VALUES ('10','4',to_date('12/04/16','DD/MM/RR'),'5000',to_date('14/06/16','DD/MM/RR'));
INSERT INTO FACTURA VALUES ('11','4',to_date('13/04/16','DD/MM/RR'),'5000',to_date('14/06/16','DD/MM/RR'));
INSERT INTO FACTURA VALUES ('12','5',to_date('12/05/16','DD/MM/RR'),'2000',to_date('14/06/16','DD/MM/RR'));
INSERT INTO FACTURA VALUES ('13','5',to_date('12/04/16','DD/MM/RR'),'1000',to_date('14/06/16','DD/MM/RR'));
INSERT INTO FACTURA VALUES ('14','5',to_date('13/04/16','DD/MM/RR'),'2000',to_date('14/06/16','DD/MM/RR'));
INSERT INTO FACTURA VALUES ('15','6',to_date('31/10/13','DD/MM/RR'),'7000',to_date('14/06/16','DD/MM/RR'));
INSERT INTO FACTURA VALUES ('16','6',to_date('01/11/13','DD/MM/RR'),'3000',to_date('14/06/16','DD/MM/RR'));
INSERT INTO FACTURA VALUES ('17','6',to_date('02/11/13','DD/MM/RR'),'2000',to_date('14/06/16','DD/MM/RR'));
INSERT INTO FACTURA VALUES ('18','7',to_date('31/10/13','DD/MM/RR'),'5000',to_date('12/12/13','DD/MM/RR'));
INSERT INTO FACTURA VALUES ('19','7',to_date('01/11/13','DD/MM/RR'),'10000',to_date('12/12/13','DD/MM/RR'));
INSERT INTO FACTURA VALUES ('20','7',to_date('02/11/13','DD/MM/RR'),'5000',to_date('12/12/13','DD/MM/RR'));

COMMIT; 