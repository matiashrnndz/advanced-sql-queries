ALTER SESSION SET NLS_DATE_FORMAT='DD/MM/YYYY';
DROP TABLE FACTURA;
DROP TABLE ALMACENA;
DROP TABLE ESTANTE;
DROP TABLE GALPON;
DROP TABLE PRODUCTO;
DROP TABLE CLIENTE;

CREATE TABLE CLIENTE( 
RUT NUMBER(5) NOT NULL CONSTRAINT CLIENTE_pk PRIMARY KEY, 
RAZONSOCIAL VARCHAR2(120) CONSTRAINT CLIENTE_Ak UNIQUE NOT NULL, 
TELEFONO NUMBER(30) NOT NULL, 
DIRECCION VARCHAR2(80) NOT NULL, 
FCHING DATE NOT NULL);

CREATE TABLE PRODUCTO( 
CODPROD NUMBER(5) NOT NULL CONSTRAINT PRODUCTO_pk PRIMARY KEY, 
DESCRIPCION VARCHAR2(100) NOT NULL, 
RUT NUMBER(5) NOT NULL CONSTRAINT PRODUCTO_TO_CLIENTE_FK REFERENCES CLIENTE, 
FDESDE DATE NOT NULL,
FHASTA DATE,
PRECIO NUMBER(5) NOT NULL,
TIPO VARCHAR2(100) NOT NULL);

CREATE TABLE GALPON( 
NOMBRE VARCHAR2(100) NOT NULL CONSTRAINT GALPON_pk PRIMARY KEY,
SUPERFICIE NUMBER(10) NOT NULL);

CREATE TABLE ESTANTE( 
NOMBRE VARCHAR2(100) NOT NULL CONSTRAINT ESTANTE_TO_GALPON_FK REFERENCES GALPON,
FILA NUMBER(5) NOT NULL,
NUMESTANTE NUMBER(5) NOT NULL,
CONSTRAINT ESTANTE_Pk PRIMARY KEY(NOMBRE, FILA, NUMESTANTE));

CREATE TABLE ALMACENA( 
NOMBRE VARCHAR2(100) NOT NULL,
FILA NUMBER(5) NOT NULL,
NUMESTANTE NUMBER(5) NOT NULL,
CODPROD NUMBER(5) NOT NULL CONSTRAINT ALMACENA_TO_PRODUCTO_FK REFERENCES PRODUCTO, 
CONSTRAINT ALMACENA_Pk PRIMARY KEY(NOMBRE, FILA, NUMESTANTE, CODPROD),
CONSTRAINT ALM_TO_EST_FK FOREIGN KEY(NOMBRE, FILA, NUMESTANTE) REFERENCES ESTANTE (NOMBRE, FILA, NUMESTANTE));

CREATE TABLE FACTURA( 
NUMFAC NUMBER(5) NOT NULL CONSTRAINT FACTURA_pk PRIMARY KEY, 
CODPROD NUMBER(5) NOT NULL CONSTRAINT FACTURA_TO_PRODUCTO_FK REFERENCES PRODUCTO,
FECHA DATE NOT NULL,
IMPORTE NUMBER(10) NOT NULL,
FCHVENCIMIENTO DATE NOT NULL);

INSERT INTO CLIENTE VALUES ('10001','Logística y Distribución','22324546','Yaguaron 2014',to_date('06/02/2013','DD/MM/YYYY'));
INSERT INTO CLIENTE VALUES ('10002','Infolab S.A','23124124','Lezica 2424',to_date('30/10/2013','DD/MM/YYYY'));
INSERT INTO CLIENTE VALUES ('10003','ServiMedic','24785693','Garibaldi 735',to_date('22/02/2016','DD/MM/YYYY'));


INSERT INTO PRODUCTO VALUES ('1','MONITOR','10001',to_date('21/12/2016','DD/MM/YYYY'),to_date('26/12/2016','DD/MM/YYYY'),'5000','INFORMÁTICA');
INSERT INTO PRODUCTO VALUES ('2','TECLADO','10002',to_date('01/01/2016','DD/MM/YYYY'),to_date('20/03/2016','DD/MM/YYYY'),'300','INFORMÁTICA');
INSERT INTO PRODUCTO VALUES ('3','BALDE','10001',to_date('03/02/2015','DD/MM/YYYY'),to_date('17/03/2015','DD/MM/YYYY'),'240','LIMPIEZA');
INSERT INTO PRODUCTO VALUES ('4','ESCOBA','10002',to_date('10/10/2014','DD/MM/YYYY'),to_date('20/04/2016','DD/MM/YYYY'),'340','LIMPIEZA');
INSERT INTO PRODUCTO VALUES ('5','HELADERA','10001',to_date('11/11/2015','DD/MM/YYYY'),to_date('04/04/2016','DD/MM/YYYY'),'15000','ELECTRODOMÉSTICO');
INSERT INTO PRODUCTO VALUES ('6','ANILLO','10001',to_date('03/02/2016','DD/MM/YYYY'),to_date('18/07/2016','DD/MM/YYYY'),'4000','JOYERÍA');
INSERT INTO PRODUCTO VALUES ('7','PERLA','10002',to_date('21/06/2016','DD/MM/YYYY'),to_date('20/09/2016','DD/MM/YYYY'),'5000','JOYERÍA');
INSERT INTO PRODUCTO VALUES ('8','PERFUME','10002',to_date('12/12/2014','DD/MM/YYYY'),to_date('03/03/2015','DD/MM/YYYY'),'20000','PERFUMERÍA');
INSERT INTO PRODUCTO VALUES ('9','MOUSE','10001',to_date('22/07/2016','DD/MM/YYYY'),to_date('20/12/2016','DD/MM/YYYY'),'300','INFORMÁTICA');
INSERT INTO PRODUCTO VALUES ('10','COCINA','10001',to_date('24/08/2015','DD/MM/YYYY'),to_date('03/02/2016','DD/MM/YYYY'),'500','ELECTRODOMÉSTICO');
INSERT INTO PRODUCTO VALUES ('11','SUSHI','10002',to_date('20/07/2015','DD/MM/YYYY'),to_date('20/09/2016','DD/MM/YYYY'),'4000','ALIMENTO');
INSERT INTO PRODUCTO VALUES ('12','MICROONDAS','10003',to_date('04/06/2016','DD/MM/YYYY'),to_date('20/07/2016','DD/MM/YYYY'),'3600','ELECTRODOMÉSTICO');
INSERT INTO PRODUCTO VALUES ('13','BATIDORA','10003',to_date('04/06/2016','DD/MM/YYYY'),to_date('20/07/2016','DD/MM/YYYY'),'4000','ELECTRODOMÉSTICO');
INSERT INTO PRODUCTO VALUES ('14','MEMORIA','10003',to_date('20/07/2016','DD/MM/YYYY'),to_date('20/09/2016','DD/MM/YYYY'),'6000','INFORMÁTICA');
INSERT INTO PRODUCTO VALUES ('15','PLACA MADRE','10003',to_date('20/07/2016','DD/MM/YYYY'),to_date('20/09/2016','DD/MM/YYYY'),'2000','INFORMÁTICA');
INSERT INTO PRODUCTO VALUES ('16','TORRE','10003',to_date('20/07/2016','DD/MM/YYYY'),to_date('20/09/2016','DD/MM/YYYY'),'40000','INFORMÁTICA');

COMMIT; 